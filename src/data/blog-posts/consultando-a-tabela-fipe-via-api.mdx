---
title: "Consultando a Tabela Fipe via API."
publishDate: 2 Oct 2023
description: Uma nova maneira de consultar a Tabela Fipe programaticamente. 
---

A [Tabela Fipe](https://veiculos.fipe.org.br) √© um excelente recurso de pesquisa para quem possui, ou para quem pretende adquirir um carro. A iniciativa de padronizar o pre√ßo m√©dio de comercializa√ß√£o dos carros novos e usados facilita muito a negocia√ß√£o e, de certa forma, alimenta a precifica√ß√£o de toda uma cadeia de produtos do mercado automotivo. 

Por conta disso √© um sonho de muita gente ter acesso a esses dados em formato de API para que possa ser inserido dentro de suas pr√≥prias aplica√ß√µes. O problema √© que a FIPE (sim, esse √© o nome da funda√ß√£o e n√£o o nome da tabela de pre√ßo de carros) n√£o disponibiliza esse dado estruturado para consultas.

Pela internet existe algumas iniciativas de transformar esses dados em API, mas todas elas sofrem com a falta de alguma coisa: dados atualizados, performance dos endpoints, dificuldade de configura√ß√£o e por a√≠ vai...

## **<u>[Entra ent√£o a minha ideia => fipe.amb1.io](https://fipe.amb1.io)</u>**
<br /><br/>
<video src="/blog/assets/blog/consultando-a-tabela-fipe-via-api/fipe-apresentacao.mp4" autoplay mute controls style="max-width: 100%"></video>
<br /><br/>
### Como adquirir os dados
A primeira atitude foi **n√£o** utilizar a estrutura j√° existente no site da Tabela Fipe. Para isso o processo de scrapping usando python se fez necess√°rio e as informa√ß√µes foram baixadas para uma inst√¢ncia do MongoDB. 

### Busca com autocomplete
O jeito que √© apresentado as informa√ß√µes para a busca √© muito quadrado e eu achei que precisava ser algo mais org√¢nico como **<u>autocomplete</u>**. Por isso, ao inv√©s de selecionar passo a passo a marca, modelo e vers√£o do carro, agora √© necess√°rio apenas buscar o ano desejado de maneira separada ap√≥s selecionar o ve√≠culo e sua vers√£o.

![imagem do mecanismo de busca do site fipe.amb1.io](/blog/assets/blog/consultando-a-tabela-fipe-via-api/autocomplete.png)

### Lista de valores
Para cada ve√≠culo encontrado √© poss√≠vel obter todos os valores **do ano de 2023** come√ßando em Janeiro/2023. O site tamb√©m insere uma porcentagem de valoriza√ß√£o/desvaloriza√ß√£o relativas ao m√™s anterior e ao come√ßo do ano para dar uma ideia do estado atual dos pre√ßos de cada modelo. 

![imagem dos cars de pre√ßos dos √∫ltimos meses para o ve√≠culo citroen c3 1.5 vers√£o exclusive no site fipe.amb1.io](/blog/assets/blog/consultando-a-tabela-fipe-via-api/precos.png)

## Mas... cad√™ a API ?

O site em quest√£o √© uma grande revis√£o de como um site de busca de valores poderia ser. Por dentro, por√©m, ele foi constru√≠do uma s√©rie de endpoints pr√≥prios onde √© poss√≠vel consultar individualmente cada entidade do projeto:
- Marcas
- Modelos
- Varia√ß√µes de modelos (c3 Tendance ou Exclusive, por exemplo)
- Pre√ßo da varia√ß√£o

Para ter acesso √†s consultas, √© necess√°rio uma chave de acesso. Por enquanto, √© poss√≠vel pegar a chave do pr√≥prio site e explorar as chamadas que s√£o feitas por ele para entender melhor como a API funciona. 

<video src="/blog/assets/blog/consultando-a-tabela-fipe-via-api/fipe-novidades.mp4" autoplay mute controls style="max-width: 100%"></video>

Mas em breve ser√° poss√≠vel pegar uma chave personalizada por cadastro para obter dados hist√≥ricos assim como os atuais de maneira automatizada. Para isso, basta se cadastrar ao final do site para receber o meu email avisando das novidades üòÑ

### Stack
- [MongoDB Atlas](http://mongodb.com) com [Data API](https://www.mongodb.com/docs/atlas/app-services/data-api/) para armazenamento e backend as a service
- [Python](https://www.python.org) para scrapper a manipula√ß√µes em geral
- [Nuxt](http://nuxt.com) para interface e gerenciamento de estado






